<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Joshua‚Äôs Bible Library</title>
  <meta name="description" content="Bible notes, papers, and articles." />

  <style>
    :root{
      /* ===== Ultra-clean editorial system ===== */
      --bg:#fbfbf8;
      --paper:#ffffff;
      --ink:#101418;
      --muted:#586171;
      --rule: rgba(16,20,24,.12);
      --soft: rgba(16,20,24,.06);

      --accent:#1f4bd8;     /* scholarly ‚Äúlink‚Äù blue */
      --accent-2:#0b7a5a;   /* subtle green for highlights */
      --danger:#c53b3b;

      --radius:14px;
      --maxw:1140px;

      --shadow: 0 10px 28px rgba(16,20,24,.08);
      --shadow-soft: 0 6px 18px rgba(16,20,24,.06);

      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      --serif: ui-serif, Georgia, "Times New Roman", Times, serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      --measure: 66ch;
    }

    /* Optional dark theme (kept because your code has a toggle) */
    [data-theme="dark"]{
      --bg:#0f1216;
      --paper:#12161c;
      --ink:#e9edf3;
      --muted:#a6afbf;
      --rule: rgba(233,237,243,.14);
      --soft: rgba(233,237,243,.08);

      --accent:#86a3ff;
      --accent-2:#7bd8b5;
      --danger:#ff6b6b;

      --shadow: 0 18px 40px rgba(0,0,0,.40);
      --shadow-soft: 0 10px 24px rgba(0,0,0,.28);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background: var(--bg);
      color: var(--ink);
      line-height:1.65;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    a{color:inherit}
    img, video { max-width: 100%; height: auto; }
    iframe { max-width: 100%; }
    html, body { overflow-x: hidden; }

    /* ===== Layout containers ===== */
    .wrap{max-width:var(--maxw); margin:0 auto; padding:26px 22px}
    main{padding: 18px 0 56px}

    /* ===== Header (institutional / journal-like) ===== */
    header{
      position:sticky; top:0; z-index:50;
      background: color-mix(in srgb, var(--bg) 92%, transparent);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--rule);
    }
    .topbar{
      max-width:var(--maxw);
      margin:0 auto;
      padding: 14px 22px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 260px;
      text-decoration:none;
    }
    .logo{
      width:68px; height:68px;
      border-radius:50%;
      object-fit:cover;
      border: 1px solid var(--rule);
      box-shadow: var(--shadow-soft);
      background: var(--paper);
    }
    .brand h1{
      margin:0;
      font-size:15px;
      letter-spacing:.2px;
      font-weight:700;
    }
    .brand p{
      margin:2px 0 0;
      font-size:12px;
      color: var(--muted);
      letter-spacing:.18px;
    }

    /* ===== Nav: clean tabs ===== */
    nav{
      display:flex;
      align-items:center;
      gap:14px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      appearance:none;
      border:0;
      background:transparent;
      color: var(--muted);
      padding: 8px 4px;
      font-size:13px;
      letter-spacing:.18px;
      cursor:pointer;
      border-bottom: 2px solid transparent;
      transition: color .12s ease, border-color .12s ease;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .pill .dot{display:none;} /* intentionally removed for clean look */
    .pill:hover{ color: var(--ink); }
    .pill.active{
      color: var(--ink);
      border-bottom-color: var(--accent);
    }
    #themeToggle{
      color: var(--ink);
      border: 1px solid var(--rule);
      background: var(--paper);
      padding: 8px 10px;
      border-radius: 999px;
      box-shadow: var(--shadow-soft);
    }
    #themeToggle:hover{ border-color: color-mix(in srgb, var(--accent) 45%, var(--rule)); }

    /* ===== Hero: editorial intro ===== */
    .hero{
  display:grid;
  grid-template-columns: 1fr 1fr; /* double column */
  gap:22px;
  align-items:start;
  margin-top: 10px;
}

    .card{
      background: var(--paper);
      border: 1px solid var(--rule);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding: 18px;
    }

    .hero h2{
      margin:0 0 10px;
      font-family: var(--serif);
      font-weight: 800;
      letter-spacing:.2px;
      line-height:1.18;
      font-size: 30px;
    }
    .hero p{
      margin:0 0 14px;
      color: var(--muted);
      max-width: var(--measure);
      font-size: 14px;
    }

    /* Search + controls: clean form style */
    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin-top: 14px;
    }
    .search{
      flex: 1 1 320px;
      display:flex;
      align-items:center;
      gap:10px;
      padding: 12px 12px;
      border: 1px solid var(--rule);
      background: color-mix(in srgb, var(--paper) 92%, var(--bg));
      border-radius: 12px;
    }
    .search input{
      width:100%;
      border:0;
      outline:0;
      background:transparent;
      color: var(--ink);
      font-size: 14px;
    }
    .select{
      border: 1px solid var(--rule);
      background: color-mix(in srgb, var(--paper) 92%, var(--bg));
      border-radius: 12px;
      padding: 12px 12px;
      color: var(--ink);
      font-size: 14px;
      outline:none;
    }

    /* KPIs: make them look like subtle ‚Äúcounts‚Äù */
    .kpis{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid var(--soft);
    }
    .kpi{
      flex: 1 1 140px;
      padding: 10px 0;
      border: 0;
      background: transparent;
    }
    .kpi b{
      display:block;
      font-size: 18px;
      font-weight: 800;
      font-family: var(--serif);
      letter-spacing:.2px;
      color: var(--ink);
    }
    .kpi span{
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.2px;
      text-transform: uppercase;
    }

    /* Podcast card: keep your content but make it ‚Äúfeature‚Äù style */
    .podcast-title{
      font-family: var(--serif);
      font-size: 18px;
      font-weight: 800;
      margin:0 0 10px;
    }
    .podcast-img{
      width:100%;
      border-radius: 12px;
      border:1px solid var(--rule);
      box-shadow: var(--shadow-soft);
      transition: transform .15s ease;
    }
    .podcast-img:hover{ transform: translateY(-2px); }

    /* ===== Main split: library + sidebar ===== */
    .split{
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:22px;
      margin-top: 22px;
      align-items:start;
    }

    /* Library header */
    .section-head{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 6px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--soft);
    }
    .section-head h2{
      margin:0;
      font-family: var(--serif);
      font-weight: 900;
      letter-spacing:.2px;
      font-size: 20px;
    }
    .section-head .count{
      color: var(--muted);
      font-size: 13px;
    }

    /* ===== Library entries: citation-like list cards ===== */
    .grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:14px;
      margin-top: 14px;
    }
    @media (min-width: 1080px){
      .grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 820px){
  .split{ grid-template-columns: 1fr; }
  .grid{ grid-template-columns: 1fr; }
}

@media (max-width: 620px){
  .hero{ grid-template-columns: 1fr; } /* collapse only on phones */
}

    .item{
      background: var(--paper);
      border: 1px solid var(--rule);
      border-radius: 12px;
      padding: 14px 14px 12px;
      cursor:pointer;
      transition: border-color .12s ease, transform .12s ease, box-shadow .12s ease;
      box-shadow: none;
      min-height: 150px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      position:relative;
      overflow:hidden;
    }

    /* left ‚Äúaccent rule‚Äù */
    .item::before{
      content:"";
      position:absolute;
      left:0; top:0; bottom:0;
      width: 3px;
      background: color-mix(in srgb, var(--accent) 55%, transparent);
      opacity:.35;
    }

    .item:hover{
      transform: translateY(-2px);
      border-color: color-mix(in srgb, var(--accent) 40%, var(--rule));
      box-shadow: var(--shadow-soft);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size: 11px;
      letter-spacing:.16em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .badge strong{
      color: var(--ink);
      font-weight: 800;
      letter-spacing:.14em;
    }

    .title{
      margin:0 0 8px;
      font-family: var(--serif);
      font-weight: 900;
      font-size: 17px;
      line-height:1.25;
      letter-spacing:.2px;
      color: var(--ink);
    }

    .excerpt{
      margin:0 0 10px;
      color: var(--muted);
      font-size: 13px;
      line-height:1.55;
      display:-webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow:hidden;
      max-width: var(--measure);
    }

    .meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding-top: 10px;
      border-top: 1px solid var(--soft);
      color: var(--muted);
      font-size: 12px;
    }
    .tags{display:flex; gap:6px; flex-wrap:wrap}
    .tag{
      font-family: var(--mono);
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--soft);
      background: color-mix(in srgb, var(--paper) 90%, var(--bg));
      color: color-mix(in srgb, var(--muted) 75%, var(--ink));
    }

    /* ===== Sidebar blocks ===== */
    .aside h2{
      font-family: var(--serif);
      font-weight: 900;
      letter-spacing:.2px;
      margin:0 0 10px;
      font-size: 18px;
    }
    .aside p, .aside ol{
      color: var(--muted);
      font-size: 13px;
      margin:0;
    }

    .quicklinks{
      border:1px solid var(--soft);
      border-radius: 12px;
      padding: 12px;
      background: color-mix(in srgb, var(--paper) 92%, var(--bg));
      margin-top: 12px;
    }
    .quicklinks b{
      display:block;
      font-size: 12px;
      letter-spacing:.16em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 10px;
    }
    .smalllink{
      color: var(--muted);
      text-decoration:none;
    }
    .smalllink:hover{ color: var(--ink); text-decoration: underline; text-underline-offset: 3px; }

    /* ===== Footer ===== */
    .footer{
      margin-top: 26px;
      padding-top: 16px;
      border-top: 1px solid var(--rule);
      color: var(--muted);
      font-size: 12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    /* ===== Reader modal ===== */
    .overlay{
      position:fixed; inset:0; z-index:100;
      background: rgba(0,0,0,.50);
      display:none; align-items:center; justify-content:center;
      padding: 18px;
    }
    .overlay.show{display:flex;}
    .modal{
      width:min(980px, 100%);
      max-height: 88vh;
      overflow:auto;
      border-radius: 14px;
      border:1px solid var(--rule);
      background: var(--paper);
      box-shadow: var(--shadow);
    }
    .modal header{
      position:sticky; top:0;
      background: color-mix(in srgb, var(--paper) 94%, transparent);
      border-bottom: 1px solid var(--rule);
      padding: 12px 14px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      backdrop-filter: blur(10px);
    }
    .modal header h3{
      margin:0;
      font-size: 11px;
      letter-spacing:.18em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .modal .content{ padding: 16px; }
    .modal .content h1{
      margin:0 0 8px;
      font-family: var(--serif);
      font-weight: 900;
      font-size: 24px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .modal .content .sub{
      color: var(--muted);
      font-size: 13px;
      margin-bottom: 12px;
    }
    .modal .content .body{
  white-space: normal;   /* was pre-wrap */
  font-size: 15px;
}

    .btn{
      border:1px solid var(--rule);
      background: color-mix(in srgb, var(--paper) 90%, var(--bg));
      color: var(--ink);
      padding: 9px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-size: 13px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      text-decoration:none;
      transition: transform .12s ease, border-color .12s ease;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: color-mix(in srgb, var(--accent) 40%, var(--rule));
    }
    .btn.danger{
      border-color: color-mix(in srgb, var(--danger) 45%, var(--rule));
    }

    /* Fix weird underline on "Download PDF" */
    .pdf-actions { margin: 10px 0 0; }
    .download-link{
      display: inline;
      width: auto;
      padding: 0;
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 3px;
      color: color-mix(in srgb, var(--accent) 85%, var(--ink));
    }
    .download-link:hover{ color: var(--accent); }

    /* ===== Mobile: keep your functionality + nicer stacking ===== */
    @media (max-width: 620px) {
      .wrap{ padding: 18px 14px; }
      .topbar{
        padding: 12px 14px;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      .brand{ width:100%; min-width: unset; }
      .logo{ width: 62px; height: 62px; }

      nav{
        width: 100%;
        gap: 10px;
      }
      .pill{
        padding: 8px 0;
      }
      #themeToggle{
        margin-left:auto;
      }

      .controls{
        flex-direction: column;
        align-items: stretch;
      }
      .search, .select{
        width: 100%;
      }
      .search input{
        font-size: 16px; /* prevent iOS zoom */
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="topbar">
      <a class="brand" href="#" id="homeLink">
        <img class="logo" src="IMG_6142.jpeg" alt="Joshua Haub" />
        <div>
          <!-- KEEP: photo + title (changed per your request) -->
          <h1>Joshua Haub Bible Material</h1>
         <p id="brandSub">Notes ‚Ä¢ Papers ‚Ä¢ Articles</p>
        </div>
      </a>

      <nav aria-label="Primary">
  <button type="button" class="pill active" id="filterAll">All</button>
  <button type="button" class="pill" id="filterNotes">Notes</button>
  <button type="button" class="pill" id="filterPapers">Papers</button>
  <button type="button" class="pill" id="filterArticles">Articles</button>
  <button type="button" class="pill" id="langToggle">Espa√±ol (LatAm)</button>
  <button type="button" class="pill" id="themeToggle" title="Toggle theme">Theme</button>
</nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="card">
       <h2 id="heroTitle">Welcome to my Bible Library</h2>
<p id="heroDesc">
  Feel free to download these files for personal use in your personal Bible study.
</p>

        <div class="controls">
          <div class="search" role="search" aria-label="Search library">
            üîé
            <input id="searchInput" placeholder="Search titles, content, tags‚Ä¶ (e.g., ‚Äútextual criticism‚Äù)" />
          </div>

          <select class="select" id="sortSelect" aria-label="Sort">
            <option value="newest">Sort: Newest</option>
            <option value="oldest">Sort: Oldest</option>
            <option value="titleaz">Sort: Title A‚ÄìZ</option>
            <option value="titleza">Sort: Title Z‚ÄìA</option>
          </select>

          <select class="select" id="tagSelect" aria-label="Tag filter">
            <option value="">Tag: (All)</option>
          </select>
        </div>

        <div class="kpis" id="kpis"></div>
      </div>

      <!-- KEEP: Podcast content + link + image -->
      <aside class="card">
  <h2 class="podcast-title" id="podcastTitle">The ‚ÄúWhat Does It Say?‚Äù Podcast</h2>

 <a href="https://open.spotify.com/show/7CQP1xRqmL7YvKWc9DEWhM?si=zlvNBbFlSmmy3GahuB6HtA" target="_blank" rel="noopener noreferrer">
  <img class="podcast-img" src="podcast-cover.jpg" alt="Podcast cover" />
</a>

  <p id="podcastDesc" style="color:var(--muted); font-size:13px; margin-top:10px;">
    In my Podcast, I aim to provide you, the listener, with a detailed account of what the Scripture says, so that in your study, you may have more than just your own ideas to consult.
  </p>
</aside>
    </section>

    <section class="split">
      <div>
        <div class="section-head">
         <h2 id="libraryHeading">Library</h2>
<div class="count"><span id="resultsCount">0</span> <span id="resultsLabel">results</span></div>
        </div>

        <div id="featuredList" class="grid" style="margin-top:14px;"></div>
        <div class="grid" id="grid"></div>
      </div>

      <!-- KEEP: About + Quick Links + How To Contact Me content -->
      <aside class="card aside">
        <h2 id="aboutHeading">About</h2>
<p id="aboutText">
  My name is Joshua Haub and I am an Evangelist and Preacher. My goal in life is to help other people learn about God and His Word. Please feel free to use my material here (free of charge) however best helps you understand these important matters.
</p>

<div class="quicklinks">
  <b id="quickLinksHeading">Quick Links</b>
          <div style="display:flex; flex-direction:column; gap:8px;">
            <a class="smalllink" href="#" onclick="setTypeFilter('All'); return false;">‚Ä¢ <span id="quickHomeLabel">Home</span></a>
<a class="smalllink" href="#" onclick="setTypeFilter('Notes'); return false;">‚Ä¢ <span id="quickNotesLabel">Notes</span></a>
<a class="smalllink" href="#" onclick="setTypeFilter('Papers'); return false;">‚Ä¢ <span id="quickPapersLabel">Papers</span></a>
<a class="smalllink" href="#" onclick="setTypeFilter('Articles'); return false;">‚Ä¢ <span id="quickArticlesLabel">Articles</span></a>
          </div>
        </div>

        <div style="height:16px"></div>

       <h2 id="contactHeading">How To Contact Me</h2>
        <ol style="margin:0; padding-left:18px; color:var(--muted); font-size:13px;">
          <li>
            Instagram
            <span style="font-family:var(--mono)">
              <a href="https://www.instagram.com/generousj_?igsh=MXkya3I5eXFmdXBqOA%3D%3D&utm_source=qr" target="_blank" rel="noopener noreferrer">
                https://www.instagram.com/generousj_
              </a>
            </span>
          </li>
          <li>
            Facebook
            <span style="font-family:var(--mono)">
              <a href="https://www.facebook.com/joshua.haub.538481" target="_blank" rel="noopener noreferrer">
                https://www.facebook.com/joshua.haub.538481
              </a>
            </span>
          </li>
          <li>
            X <span id="formerlyTwitterLabel" style="font-family:var(--mono)">(Formerly Twitter)</span>
            <span style="font-family:var(--mono)">
              <a href="https://x.com/joshhaub" target="_blank" rel="noopener noreferrer">
                https://x.com/joshhaub
              </a>
            </span>
          </li>
        </ol>
      </aside>
    </section>

    <!-- KEEP: footer text -->
    <footer class="footer">
  <div id="footerLeft"></div>
  <div id="footerRight"></div>
</footer>
  </main>

  <!-- Reader Modal (KEEP: same IDs/logic; cleaner skin) -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Reader">
    <div class="modal">
      <header>
        <h3 id="modalType">Reader</h3>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn" id="downloadBtn" href="#" download title="Download PDF" style="display:none;">‚¨áÔ∏è</a>
          <button class="btn" id="copyLinkBtn">Copy Link</button>
          <button class="btn danger" id="closeBtn">Close</button>
        </div>
      </header>
      <div class="content">
        <h1 id="modalTitle"></h1>
        <div class="sub" id="modalSub"></div>
        <div class="tags" id="modalTags" style="margin-bottom:12px;"></div>
        <div class="body" id="modalBody"></div>
      </div>
    </div>
  </div>

  <script>
    /*************************************************************
     * EDIT YOUR CONTENT HERE
     *************************************************************/
    const CONTENT = [
      {
        id: "john-7-53-8-11",
        type: "Papers",
        title: "Is John 7:53‚Äì8:11 Part of the Original Text of John?",
        date: "2026-01-06",
        featured: false,
        tags: ["John", "Textual Criticism", "Pericope Adulterae", "Church Fathers", "Manuscript"],
        excerpt: "A textual-critical analysis of John 7:53‚Äì8:11 and its external evidence from the Manuscript Witnesses and Early Church Fathers.",
        pdfHref: "Is John 7.53-8.11 Part of the Original Text of John (PDF).pdf",
        body: `
<iframe
  src="Is John 7.53-8.11 Part of the Original Text of John (PDF).pdf"
  width="100%"
  height="900"
  style="border:none;"
></iframe>

<p class="pdf-actions">
  <a class="download-link" href="Is John 7.53-8.11 Part of the Original Text of John (PDF).pdf" download>Download PDF</a>
</p>
`
      },

      {
        id: "luke-23-34a-authorship",
        type: "Papers",
        title: "The External Evidence for the Authenticity of Luke 23:34a",
        date: "2026-01-07",
        featured: false,
        tags: ["Luke", "Textual Criticism", "Manuscripts", "Church Fathers"],
        excerpt: "A textual-critical analysis of Luke 23:34a and its external evidence from the Manuscript Witnesses and Early Church Fathers.",
        pdfHref: "The%20External%20Evidence%20for%20the%20Authorship%20of%20Luke%2023.34a.%20An%20Examination%20of%20the%20Evidence%20from%20the%20Manuscript%20and%20Church%20Father%20Witnesses.pdf",
        body: `
<iframe
  src="The%20External%20Evidence%20for%20the%20Authorship%20of%20Luke%2023.34a.%20An%20Examination%20of%20the%20Evidence%20from%20the%20Manuscript%20and%20Church%20Father%20Witnesses.pdf"
  width="100%"
  height="900"
  style="border:none;"
></iframe>

<p class="pdf-actions">
  <a class="download-link" href="The%20External%20Evidence%20for%20the%20Authorship%20of%20Luke%2023.34a.%20An%20Examination%20of%20the%20Evidence%20from%20the%20Manuscript%20and%20Church%20Father%20Witnesses.pdf" download>Download PDF</a>
</p>
`
      },

      {
        id: "1cor-14-34-35-authorship",
        type: "Papers",
        title: "Who Wrote 1 Cor. 14:34‚Äì35 ‚Äî Paul or Someone Else?",
        date: "2026-01-07",
        featured: false,
        tags: ["1 Corinthians", "Textual Criticism", "Manuscript"],
        excerpt: "A textual-critical analysis of 1 Corinthians 14:34-5 and its external evidence from the Manuscript Witnesses.",
        pdfHref: "Who Wrote 1 Cor. 14.34-5. Paul or Someone Else (PDF).pdf",
        body: `
<iframe
  src="Who Wrote 1 Cor. 14.34-5. Paul or Someone Else (PDF).pdf"
  width="100%"
  height="900"
  style="border:none;"
></iframe>

<p class="pdf-actions">
  <a class="download-link" href="Who Wrote 1 Cor. 14.34-5. Paul or Someone Else (PDF).pdf" download>Download PDF</a>
</p>
`
      }
    ];
    /*************************************************************
     * LANGUAGE (EN / ES-LatAm) ‚Äî minimal i18n layer
     *************************************************************/
    const I18N = {
      en: {
        nav_all: "All",
        nav_notes: "Notes",
        nav_papers: "Papers",
        nav_articles: "Articles",
        brand_sub: "Notes ‚Ä¢ Papers ‚Ä¢ Articles",
        theme_btn: "Theme",
        theme_title: "Toggle theme",
        hero_title: "Welcome to my Bible Library",
        hero_desc: "Feel free to download these files for personal use in your personal Bible study.",
        search_ph: "Search titles, content, tags‚Ä¶ (e.g., ‚Äútextual criticism‚Äù)",
        sort_newest: "Sort: Newest",
        sort_oldest: "Sort: Oldest",
        sort_titleaz: "Sort: Title A‚ÄìZ",
        sort_titleza: "Sort: Title Z‚ÄìA",
        tag_all: "Tag: (All)",
        tag_prefix: "Tag: ",
        library_heading: "Library",
        results_label: "results",
        empty_title: "No results.",
        empty_desc: "Try removing filters or searching a different term.",
        about_heading: "About",
        about_text:
          "My name is Joshua Haub and I am an Evangelist and Preacher. My goal in life is to help other people learn about God and His Word. Please feel free to use my material here (free of charge) however best helps you understand these important matters.",
        quicklinks_heading: "Quick Links",
        quick_home: "Home",
        quick_notes: "Notes",
        quick_papers: "Papers",
        quick_articles: "Articles",
        contact_heading: "How To Contact Me",
        formerly_twitter: "(Formerly Twitter)",
        modal_reader: "Reader",
        modal_copy: "Copy Link",
        modal_copied: "Copied!",
        modal_close: "Close",
        dl_title: "Download PDF",
        open_prefix: "Open ",
        copy_fail: "Couldn‚Äôt copy automatically. You can manually copy the URL from the address bar.",
        podcast_title: "The ‚ÄúWhat Does It Say?‚Äù Podcast",
        podcast_desc:
          "In my Podcast, I aim to provide you, the listener, with a detailed account of what the Scripture says, so that in your study, you may have more than just your own ideas to consult.",
        lang_btn_when_en: "Espa√±ol (LatAm)",
        lang_btn_when_es: "English",
        footer_left: "¬© {year} Joshua‚Äôs Bible Library",
footer_right: "To Him Be the Glory",
        kpi_total: "Total",
kpi_notes: "Notes",
kpi_papers: "Papers",
kpi_articles: "Articles",
kpi_featured: "Featured",
      },
      es: {
        nav_all: "Todo",
        nav_notes: "Notas",
        nav_papers: "Trabajos",
        nav_articles: "Art√≠culos",
        brand_sub: "Notas ‚Ä¢ Trabajos ‚Ä¢ Art√≠culos",
        theme_btn: "Tema",
        theme_title: "Cambiar tema",
        hero_title: "Bienvenido a mi biblioteca b√≠blica",
        hero_desc: "Puedes descargar estos archivos para uso personal en tu estudio b√≠blico.",
        search_ph: "Buscar t√≠tulos, contenido, etiquetas‚Ä¶ (p. ej., ‚Äúcr√≠tica textual‚Äù)",
        sort_newest: "Ordenar: M√°s recientes",
        sort_oldest: "Ordenar: M√°s antiguos",
        sort_titleaz: "Ordenar: T√≠tulo A‚ÄìZ",
        sort_titleza: "Ordenar: T√≠tulo Z‚ÄìA",
        tag_all: "Etiqueta: (Todas)",
        tag_prefix: "Etiqueta: ",
        library_heading: "Biblioteca",
        results_label: "resultados",
        empty_title: "No hay resultados.",
        empty_desc: "Prueba quitar filtros o buscar otro t√©rmino.",
        about_heading: "Acerca de",
        about_text:
          "Me llamo Joshua Haub y soy evangelista y predicador. Mi meta en la vida es ayudar a otras personas a conocer a Dios y Su Palabra. Si√©ntete libre de usar mi material aqu√≠ (gratis) de la manera que mejor te ayude a entender estos asuntos importantes.",
        quicklinks_heading: "Enlaces r√°pidos",
        quick_home: "Inicio",
        quick_notes: "Notas",
        quick_papers: "Trabajos",
        quick_articles: "Art√≠culos",
        contact_heading: "C√≥mo contactarme",
        formerly_twitter: "(Antes Twitter)",
        modal_reader: "Lector",
        modal_copy: "Copiar enlace",
        modal_copied: "¬°Copiado!",
        modal_close: "Cerrar",
        dl_title: "Descargar PDF",
        open_prefix: "Abrir ",
        copy_fail: "No se pudo copiar autom√°ticamente. Puedes copiar la URL manualmente desde la barra de direcciones.",
        podcast_title: "El p√≥dcast ‚ÄúWhat Does It Say?‚Äù",
        podcast_desc:
          "En mi p√≥dcast, busco darte a ti, el oyente, un recuento detallado de lo que dice la Escritura, para que en tu estudio tengas m√°s que solo tus propias ideas para consultar.",
        lang_btn_when_en: "Espa√±ol (LatAm)",
        lang_btn_when_es: "English",
        footer_left: "¬© {year} Biblioteca b√≠blica de Joshua",
footer_right: "A √âl sea la gloria",
        kpi_total: "Total",
kpi_notes: "Notas",
kpi_papers: "Trabajos",
kpi_articles: "Art√≠culos",
kpi_featured: "Destacado",
      }
    };

    // Spanish titles/excerpts (titles must end with ‚Äú(En ingl√©s)‚Äù in ES mode)
    const CONTENT_ES = {
      "john-7-53-8-11": {
        title: "¬øForma parte Juan 7:53‚Äì8:11 del texto original de Juan?",
        excerpt: "Un an√°lisis de cr√≠tica textual de Juan 7:53‚Äì8:11 y su evidencia externa a partir de los testigos manuscritos y los primeros Padres de la Iglesia."
      },
      "luke-23-34a-authorship": {
        title: "La evidencia externa a favor de la autenticidad de Lucas 23:34a",
        excerpt: "Un an√°lisis de cr√≠tica textual de Lucas 23:34a y su evidencia externa a partir de los testigos manuscritos y los primeros Padres de la Iglesia."
      },
      "1cor-14-34-35-authorship": {
        title: "¬øQui√©n escribi√≥ 1 Cor. 14:34‚Äì35: Pablo u otra persona?",
        excerpt: "Un an√°lisis de cr√≠tica textual de 1 Corintios 14:34‚Äì35 y su evidencia externa a partir de los testigos manuscritos."
      }
    };
const TAGS_ES = {
  "John": "Juan",
  "Textual Criticism": "Cr√≠tica textual",
  "Pericope Adulterae": "Per√≠copa de la ad√∫ltera",
  "Church Fathers": "Padres de la Iglesia",
  "Manuscript": "Manuscrito",
  "Manuscripts": "Manuscritos",
  "Luke": "Lucas",
  "1 Corinthians": "1 Corintios"
};
    function t(key){
      return (I18N[state.lang] && I18N[state.lang][key]) || (I18N.en[key] || "");
    }

    function getLocalizedTitle(item){
      if (state.lang !== "es") return item.title || "";
      const tr = CONTENT_ES[item.id];
      const base = tr && tr.title ? tr.title : (item.title || "");
      return `${base} (En ingl√©s)`;
    }
function localizeTag(tag){
  if (state.lang !== "es") return tag;
  return TAGS_ES[tag] || tag; // fallback to English if missing
}

function localizeType(type){
  if (state.lang !== "es") return type;
  const map = { "Notes":"Notas", "Papers":"Trabajos", "Articles":"Art√≠culos", "All":"Todo" };
  return map[type] || type;
}
    function getLocalizedExcerpt(item){
      if (state.lang !== "es") return item.excerpt || "";
      const tr = CONTENT_ES[item.id];
      return (tr && tr.excerpt) ? tr.excerpt : (item.excerpt || "");
    }

    function applyLanguage(){
      // document language
      document.documentElement.setAttribute("lang", state.lang === "es" ? "es" : "en");

      // top nav
      els.filterAll.textContent = t("nav_all");
      els.filterNotes.textContent = t("nav_notes");
      els.filterPapers.textContent = t("nav_papers");
      els.filterArticles.textContent = t("nav_articles");

      // brand + hero
      document.getElementById("brandSub").textContent = t("brand_sub");
      document.getElementById("heroTitle").textContent = t("hero_title");
      document.getElementById("heroDesc").textContent = t("hero_desc");

      // podcast
      document.getElementById("podcastTitle").textContent = t("podcast_title");
      document.getElementById("podcastDesc").textContent = t("podcast_desc");

      // search placeholder
      els.searchInput.placeholder = t("search_ph");

      // theme + language buttons
      els.themeToggle.textContent = t("theme_btn");
      els.themeToggle.title = t("theme_title");

      els.langToggle.textContent = (state.lang === "es") ? t("lang_btn_when_es") : t("lang_btn_when_en");

      // sort option labels
      const opts = els.sortSelect.options;
      for (let i = 0; i < opts.length; i++){
        const v = opts[i].value;
        if (v === "newest") opts[i].textContent = t("sort_newest");
        if (v === "oldest") opts[i].textContent = t("sort_oldest");
        if (v === "titleaz") opts[i].textContent = t("sort_titleaz");
        if (v === "titleza") opts[i].textContent = t("sort_titleza");
      }

      // tag select (rebuild so label/prefix switches cleanly)
      buildTagSelect();

      // library heading + results label
      document.getElementById("libraryHeading").textContent = t("library_heading");
      document.getElementById("resultsLabel").textContent = t("results_label");

      // sidebar
      document.getElementById("aboutHeading").textContent = t("about_heading");
      document.getElementById("aboutText").textContent = t("about_text");
      document.getElementById("quickLinksHeading").textContent = t("quicklinks_heading");
      document.getElementById("quickHomeLabel").textContent = t("quick_home");
      document.getElementById("quickNotesLabel").textContent = t("quick_notes");
      document.getElementById("quickPapersLabel").textContent = t("quick_papers");
      document.getElementById("quickArticlesLabel").textContent = t("quick_articles");
      document.getElementById("contactHeading").textContent = t("contact_heading");
      document.getElementById("formerlyTwitterLabel").textContent = t("formerly_twitter");

      // modal UI (static labels)
      els.overlay.setAttribute("aria-label", t("modal_reader"));
      els.modalType.textContent = t("modal_reader");
      els.copyLinkBtn.textContent = t("modal_copy");
      els.closeBtn.textContent = t("modal_close");
      els.downloadBtn.title = t("dl_title");
            // footer (updates on language toggle)
      document.getElementById("footerLeft").textContent =
        t("footer_left").replace("{year}", new Date().getFullYear());
      document.getElementById("footerRight").textContent = t("footer_right");
    }
    /*************************************************************
     * APP LOGIC (No need to edit below unless you want to)
     *************************************************************/
    const els = {
      grid: document.getElementById("grid"),
      featuredList: document.getElementById("featuredList"),
      kpis: document.getElementById("kpis"),
      resultsCount: document.getElementById("resultsCount"),
      searchInput: document.getElementById("searchInput"),
      sortSelect: document.getElementById("sortSelect"),
      tagSelect: document.getElementById("tagSelect"),

      filterAll: document.getElementById("filterAll"),
      filterNotes: document.getElementById("filterNotes"),
      filterPapers: document.getElementById("filterPapers"),
      filterArticles: document.getElementById("filterArticles"),
      themeToggle: document.getElementById("themeToggle"),
      langToggle: document.getElementById("langToggle"),

      overlay: document.getElementById("overlay"),
      modalTitle: document.getElementById("modalTitle"),
      modalSub: document.getElementById("modalSub"),
      modalBody: document.getElementById("modalBody"),
      modalTags: document.getElementById("modalTags"),
      modalType: document.getElementById("modalType"),
      closeBtn: document.getElementById("closeBtn"),
      copyLinkBtn: document.getElementById("copyLinkBtn"),
      downloadBtn: document.getElementById("downloadBtn"),

      exportBtn: document.getElementById("exportBtn"),
      importBtn: document.getElementById("importBtn"),
      clearFiltersBtn: document.getElementById("clearFiltersBtn"),
      homeLink: document.getElementById("homeLink"),
    };

    let state = {
      type: "All",
      query: "",
      tag: "",
      sort: "newest",
      theme: "light", // clean professional default
      lang: "en",
    };

    // ‚úÖ Load saved theme safely
    try {
      const saved = localStorage.getItem("theme");
      if (saved === "light" || saved === "dark") state.theme = saved;
    } catch (e) {}

    function applyTheme() {
      document.documentElement.setAttribute(
        "data-theme",
        state.theme === "dark" ? "dark" : "light"
      );
      try { localStorage.setItem("theme", state.theme); } catch (e) {}
    }

    function normalize(s){ return (s || "").toLowerCase(); }

    function formatDate(iso){
      try {
        const [y,m,d] = iso.split("-").map(Number);
        const dt = new Date(y, m-1, d);
        return dt.toLocaleDateString(undefined, {year:"numeric", month:"short", day:"numeric"});
      } catch { return iso; }
    }

    function contentMatches(item) {
      const q = normalize(state.query).trim();
      if (state.type !== "All" && item.type !== state.type) return false;
      if (state.tag && !(item.tags || []).includes(state.tag)) return false;
      
      if (!q) return true;

      const hay = normalize([
        item.title,
        item.excerpt,
        item.body,
        (item.tags || []).join(" ")
      ].join(" | "));

      return hay.includes(q);
    }

    function sortItems(items) {
      const s = state.sort;
      const copy = [...items];
      if (s === "newest") copy.sort((a,b)=> (b.date || "").localeCompare(a.date || ""));
      if (s === "oldest") copy.sort((a,b)=> (a.date || "").localeCompare(b.date || ""));
      if (s === "titleaz") copy.sort((a,b)=> (a.title || "").localeCompare(b.title || ""));
      if (s === "titleza") copy.sort((a,b)=> (b.title || "").localeCompare(a.title || ""));
      return copy;
    }

    function setActiveFilterButtons(){
      const map = {
        "All": els.filterAll,
        "Notes": els.filterNotes,
        "Papers": els.filterPapers,
        "Articles": els.filterArticles
      };
      [els.filterAll, els.filterNotes, els.filterPapers, els.filterArticles].forEach(b=>b.classList.remove("active"));
      map[state.type].classList.add("active");
    }

    function buildKPIs(){
      const total = CONTENT.length;
      const notes = CONTENT.filter(x=>x.type==="Notes").length;
      const papers = CONTENT.filter(x=>x.type==="Papers").length;
      const articles = CONTENT.filter(x=>x.type==="Articles").length;
      const featured = CONTENT.filter(x=>x.featured).length;

      const kpis = [
  {label: t("kpi_total"), value: total},
  {label: t("kpi_notes"), value: notes},
  {label: t("kpi_papers"), value: papers},
  {label: t("kpi_articles"), value: articles},
  {label: t("kpi_featured"), value: featured},
];

      els.kpis.innerHTML = kpis.map(k=>`
        <div class="kpi">
          <b>${k.value}</b>
          <span>${k.label}</span>
        </div>
      `).join("");
    }

    function buildTagSelect(){
      const set = new Set();
      CONTENT.forEach(x => (x.tags || []).forEach(t => set.add(t)));
      const tags = Array.from(set).sort((a,b)=>a.localeCompare(b));
      const current = state.tag;

           const allLabel = t("tag_all");
      const prefix = t("tag_prefix");

      els.tagSelect.innerHTML =
  `<option value="">${escapeHtml(allLabel)}</option>` +
  tags.map(tg =>
    `<option value="${escapeHtml(tg)}"${tg===current ? " selected":""}>` +
    `${escapeHtml(prefix)}${escapeHtml(localizeTag(tg))}</option>`
  ).join("");
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function itemCard(item){
  const tags = (item.tags || []).slice(0,4).map(t=>`<span class="tag">${escapeHtml(localizeTag(t))}</span>`).join("");
  const extra = (item.tags || []).length > 4 ? `<span class="tag">+${(item.tags||[]).length - 4}</span>` : "";
  return `
    <article class="item" tabindex="0" role="button" aria-label="${escapeHtml(t("open_prefix") + getLocalizedTitle(item))}" data-id="${escapeHtml(item.id)}">
      <div>
        <div class="badge"><strong>${escapeHtml(localizeType(item.type))}</strong> ¬∑ ${escapeHtml(formatDate(item.date || ""))}</div>
        <h3 class="title">${escapeHtml(getLocalizedTitle(item))}</h3>
        <p class="excerpt">${escapeHtml(getLocalizedExcerpt(item))}</p>
      </div>
      <div class="meta">
        <div class="tags">${tags}${extra}</div>
        <div></div>
      </div>
    </article>
  `;
}
    function renderFeatured(){
  if (!els.featuredList) return;

  const featured = sortItems(CONTENT.filter(x=>x.featured)).slice(0, 4);

  // ‚úÖ hide the section entirely when empty (clean polish)
  if (!featured.length){
    els.featuredList.style.display = "none";
    els.featuredList.innerHTML = "";
    return;
  }

  // ‚úÖ show it when there is content
  els.featuredList.style.display = "grid";

  els.featuredList.innerHTML = featured.map(x=>`
    <div class="item" style="min-height:auto;" data-id="${escapeHtml(x.id)}">
      <div class="badge"><strong>${escapeHtml(localizeType(x.type))}</strong> ¬∑ ${escapeHtml(formatDate(x.date || ""))}</div>
      <div style="height:6px"></div>
      <div style="font-weight:650;">${escapeHtml(getLocalizedTitle(x))}</div>
      <div style="color:var(--muted);font-size:12px;margin-top:4px;">${escapeHtml(getLocalizedExcerpt(x))}</div>
    </div>
  `).join("");
}

    function renderGrid(){
  renderFeatured(); // ‚úÖ keep Featured in sync (still hides when empty)
  setActiveFilterButtons();

      const filtered = CONTENT.filter(contentMatches);
      const sorted = sortItems(filtered);

      els.resultsCount.textContent = sorted.length;
            els.grid.innerHTML = sorted.map(itemCard).join("") || `
        <div class="card" style="grid-column: 1/-1;">
          <b>${escapeHtml(t("empty_title"))}</b>
          <div style="color:var(--muted); margin-top:6px;">
            ${escapeHtml(t("empty_desc"))}
          </div>
        </div>
      `;

      document.querySelectorAll("[data-id]").forEach(el=>{
        el.addEventListener("click", ()=> openReader(el.getAttribute("data-id")));
        el.addEventListener("keydown", (e)=>{
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            openReader(el.getAttribute("data-id"));
          }
        });
      });
    }

    function isMobileView() {
      return window.matchMedia("(max-width: 620px)").matches;
    }

    function openReader(id){
      const item = CONTENT.find(x=>x.id === id);
      if (!item) return;

      els.modalType.textContent = localizeType(item.type);
            els.modalTitle.textContent = getLocalizedTitle(item);
      const featuredLabel = (state.lang === "es") ? "Destacado" : "Featured";
els.modalSub.textContent =
  `${formatDate(item.date || "")} ‚Ä¢ ${item.featured ? (featuredLabel + " ‚Ä¢ ") : ""}` +
  `${(item.tags || []).map(localizeTag).join(" ‚Ä¢ ")}`;

      if (isMobileView() && item.pdfHref) {
        history.replaceState(null, "", "#/");
        window.open(item.pdfHref, "_blank", "noopener,noreferrer");
        return;
      }

      els.modalBody.innerHTML = item.body || "";

      if (item.pdfHref) {
        els.downloadBtn.href = item.pdfHref;
        els.downloadBtn.style.display = "inline-flex";
      } else {
        els.downloadBtn.href = "#";
        els.downloadBtn.style.display = "none";
      }

      els.modalTags.innerHTML = (item.tags || []).map(t=>`<span class="tag">${escapeHtml(localizeTag(t))}</span>`).join("");

      els.overlay.classList.add("show");
      document.body.style.overflow = "hidden";
      history.replaceState(null, "", `#/${encodeURIComponent(item.id)}`);
    }

    function closeReader(){
      els.overlay.classList.remove("show");
      document.body.style.overflow = "";
      history.replaceState(null, "", "#/");
    }

    function hydrateFromHash(){
      const h = location.hash || "#/";
      const m = h.match(/^#\/(.+)$/);
      if (m && m[1] && m[1] !== "") {
        const id = decodeURIComponent(m[1]);
        const exists = CONTENT.some(x=>x.id === id);
        if (exists) openReader(id);
      }
    }

    function setTypeFilter(type){
      state.type = type;
      renderGrid();
      scrollToTop();
    }
    window.setTypeFilter = setTypeFilter;

    function scrollToTop(){
      window.scrollTo({top:0, behavior:"smooth"});
    }
    window.scrollToTop = scrollToTop;

    function clearFilters(){
      state.type = "All";
      state.query = "";
      state.tag = "";
      state.sort = "newest";
      els.searchInput.value = "";
      els.sortSelect.value = "newest";
      buildTagSelect();
      renderGrid();
      scrollToTop();
    }

    function exportJSON(){
      const payload = JSON.stringify(CONTENT, null, 2);
      const blob = new Blob([payload], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "bible-library-content.json";
      a.click();
      URL.revokeObjectURL(url);
    }

    function importJSON(){
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "application/json";
      input.onchange = async () => {
        const file = input.files && input.files[0];
        if (!file) return;
        const text = await file.text();
        try {
          const parsed = JSON.parse(text);
          if (!Array.isArray(parsed)) throw new Error("JSON must be an array.");
          alert("Imported JSON successfully. NOTE: This demo file does not overwrite the hard-coded CONTENT array.\n\nTo use imports permanently, you‚Äôd store parsed data in localStorage or load it from a separate .json file.");
        } catch (e) {
          alert("Import failed: " + e.message);
        }
      };
      input.click();
    }

    els.filterAll.addEventListener("click", ()=> setTypeFilter("All"));
els.filterNotes.addEventListener("click", ()=> setTypeFilter("Notes"));
els.filterPapers.addEventListener("click", ()=> setTypeFilter("Papers"));
els.filterArticles.addEventListener("click", ()=> setTypeFilter("Articles"));

els.themeToggle.addEventListener("click", ()=>{
  state.theme = (state.theme === "light") ? "dark" : "light";
  applyTheme();
});

els.langToggle.addEventListener("click", ()=>{
  state.lang = (state.lang === "en") ? "es" : "en";
  applyLanguage();
  buildKPIs();          // ‚úÖ add this
  renderGrid();
  scrollToTop();
});

    els.searchInput.addEventListener("input", (e)=>{
      state.query = e.target.value || "";
      renderGrid();
    });

    els.sortSelect.addEventListener("change", (e)=>{
      state.sort = e.target.value;
      renderGrid();
    });

    els.tagSelect.addEventListener("change", (e)=>{
      state.tag = e.target.value || "";
      renderGrid();
    });

    els.closeBtn.addEventListener("click", closeReader);
    els.overlay.addEventListener("click", (e)=>{
      if (e.target === els.overlay) closeReader();
    });
    document.addEventListener("keydown", (e)=>{
      if (e.key === "Escape" && els.overlay.classList.contains("show")) closeReader();
    });

    els.copyLinkBtn.addEventListener("click", async ()=>{
  try{
    await navigator.clipboard.writeText(location.href);
    els.copyLinkBtn.textContent = t("modal_copied");
    setTimeout(()=> els.copyLinkBtn.textContent = t("modal_copy"), 900);
  } catch {
    alert(t("copy_fail"));
  }
});

    els.exportBtn?.addEventListener("click", (e)=>{ e.preventDefault(); exportJSON(); });
    els.importBtn?.addEventListener("click", (e)=>{ e.preventDefault(); importJSON(); });
    els.clearFiltersBtn?.addEventListener("click", (e)=>{ e.preventDefault(); clearFilters(); });
    els.homeLink?.addEventListener("click", (e)=>{ e.preventDefault(); scrollToTop(); });

    function init() {
      if (!location.hash) history.replaceState(null, "", "#/");
            applyTheme();
      applyLanguage();

      buildKPIs();
buildTagSelect();

state.type = "All";
renderGrid();

      hydrateFromHash();
      window.addEventListener("hashchange", hydrateFromHash);
    }

    if (document.readyState === "loading") {
      window.addEventListener("DOMContentLoaded", init);
    } else {
      init();
    }
  </script>
</body>
</html>
